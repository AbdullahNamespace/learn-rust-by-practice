// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ## ðŸ”· Problem 25: read_age_until_valid.rs
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// **Category:** Validation / Loops | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØµØ­Ø© / Ø§Ù„Ø­Ù„Ù‚Ø§Øª
// **Difficulty:** Easy | Ø³Ù‡Ù„
// **Source:** programmingadvices.com
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“ DESCRIPTION | Ø§Ù„ÙˆØµÙ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//
// EN:
// Write a program that repeatedly prompts the user to enter an age until
// a valid age within the range [18, 45] is provided.
// The program should:
// 1. Repeatedly read an age from the user
// 2. Validate if the age is between 18 and 45 (inclusive)
// 3. Continue prompting until a valid age is entered
// 4. Display the valid age once accepted
//
// This demonstrates input validation with retry logic, a common pattern in
// interactive programs. It ensures the program only proceeds with valid data.
//
// AR:
// Ø§ÙƒØªØ¨ Ø¨Ø±Ù†Ø§Ù…Ø¬Ù‹Ø§ ÙŠØ·Ù„Ø¨ Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø´ÙƒÙ„ Ù…ØªÙƒØ±Ø± Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù…Ø± Ø­ØªÙ‰
// ÙŠØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø¹Ù…Ø± ØµØ§Ù„Ø­ Ø¶Ù…Ù† Ø§Ù„Ù†Ø·Ø§Ù‚ [18, 45].
// ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬:
// 1. Ù‚Ø±Ø§Ø¡Ø© Ø¹Ù…Ø± Ù…Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø´ÙƒÙ„ Ù…ØªÙƒØ±Ø±
// 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø¹Ù…Ø± Ø¨ÙŠÙ† 18 Ùˆ 45 (Ø´Ø§Ù…Ù„)
// 3. Ø§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ø§Ù„Ø·Ù„Ø¨ Ø­ØªÙ‰ ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù…Ø± ØµØ§Ù„Ø­
// 4. Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ø± Ø§Ù„ØµØ§Ù„Ø­ Ø¨Ù…Ø¬Ø±Ø¯ Ù‚Ø¨ÙˆÙ„Ù‡
//
// Ù‡Ø°Ø§ ÙŠÙˆØ¶Ø­ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹ Ù…Ù†Ø·Ù‚ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©ØŒ Ù†Ù…Ø· Ø´Ø§Ø¦Ø¹ ÙÙŠ
// Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ©. ÙŠØ¶Ù…Ù† Ø£Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ ÙŠØªÙ‚Ø¯Ù… ÙÙ‚Ø· Ø¨Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø©.
//
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ’¡ EXAMPLES | Ø§Ù„Ø£Ù…Ø«Ù„Ø©
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//
// Example 1 (First Input Valid):
// Input:  Age = 30
// Output: Your Age is: 30
//   Why:  30 is within the valid range on first try
//
// Example 2 (Multiple Attempts):
// Input:  Age = 10 (invalid) â†’ Age = 50 (invalid) â†’ Age = 25 (valid)
// Output: Your Age is: 25
//   Why:  Program keeps asking until valid age is entered
//
// Example 3 (Edge Case - Lower Bound):
// Input:  Age = 17 (invalid) â†’ Age = 18 (valid)
// Output: Your Age is: 18
//   Why:  18 is the minimum valid age
//
// Example 4 (Edge Case - Upper Bound):
// Input:  Age = 46 (invalid) â†’ Age = 45 (valid)
// Output: Your Age is: 45
//   Why:  45 is the maximum valid age
//
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// âš ï¸ CONSTRAINTS | Ø§Ù„Ù‚ÙŠÙˆØ¯
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//
// â€¢ Age must be a positive integer | ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ø¹Ù…Ø± Ø¹Ø¯Ø¯Ø§Ù‹ ØµØ­ÙŠØ­Ø§Ù‹ Ù…ÙˆØ¬Ø¨Ø§Ù‹
// â€¢ Valid range is [18, 45] (inclusive) | Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ØµØ§Ù„Ø­ Ù‡Ùˆ [18, 45] (Ø´Ø§Ù…Ù„)
// â€¢ Program must loop until valid input is received | ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒØ±Ø± Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø­ØªÙ‰ ÙŠØªÙ… Ø¥Ø¯Ø®Ø§Ù„ ØµØ§Ù„Ø­
// â€¢ Should handle invalid input gracefully | ÙŠØ¬Ø¨ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ØºÙŠØ± Ø§Ù„ØµØ­ÙŠØ­ Ø¨Ø´ÙƒÙ„ Ù„Ø·ÙŠÙ
//
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ”§ FUNCTION SIGNATURES | ØªÙˆÙ‚ÙŠØ¹Ø§Øª Ø§Ù„Ø¯ÙˆØ§Ù„
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//
// fn read_age() -> i32
// fn validate_number_in_range(number: i32, from: i32, to: i32) -> bool
// fn read_until_age_between(from: i32, to: i32) -> i32
// fn print_result(age: i32)
//
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

use std::io::{self, Write};

// ======================
//     INPUT FUNCTIONS
// ======================

fn read_until_age_between<T>(prompt: &str, from: T, to: T) -> T
where
    T: std::str::FromStr + PartialOrd + Copy + std::fmt::Display,
{
    loop {
        let input = read_number::<T>(prompt);

        if validate_number_in_range(input, from, to) {
            return input;
        }

        println!(
            "Error: invalid input, please enter a number between {} and {}!",
            from, to
        );
    }
}

fn read_age() -> i32 {
    read_until_age_between::<i32>("Please enter your age: ", 18, 45)
}

// ======================
//   PROCESSING FUNCTIONS
// ======================

fn validate_number_in_range<T>(number: T, from: T, to: T) -> bool
where
    T: PartialOrd + Copy,
{
    number >= from && number <= to
}

// ======================
//     OUTPUT FUNCTIONS
// ======================

fn print_result(age: i32) {
    println!("Your age is: {}", age);
}

// ======================
//         MAIN
// ======================

fn main() {
    print_result(read_age());
}

// ======================
//   UTILITY FUNCTIONS
// ======================

fn read_string(prompt: &str) -> Result<String, io::Error> {
    print!("{}", prompt);
    io::stdout().flush()?;

    let mut input = String::new();
    io::stdin().read_line(&mut input)?;

    Ok(input.trim().to_string())
}

fn read_number<T: std::str::FromStr>(prompt: &str) -> T {
    loop {
        let input = match read_string(prompt) {
            Ok(value) => value,
            Err(_) => {
                println!("Error: invalid input I/O!");
                continue;
            }
        };

        match input.trim().parse() {
            Ok(value) => return value,
            Err(_) => {
                println!("Error: invalid input, please enter a valid number!");
            }
        }
    }
}
